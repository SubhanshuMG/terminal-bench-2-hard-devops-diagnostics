{"version": 2, "width": 160, "height": 40, "timestamp": 1772224537, "env": {"SHELL": "/bin/bash", "TERM": "tmux-256color"}}
[0.002247, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[0.963531, "i", "clear\r"]
[0.963978, "o", "clear\r\n\u001b[?2004l\r"]
[0.965314, "o", "\u001b[H\u001b[J\u001b[3J"]
[0.965423, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[2.385188, "i", "ls -la /app/\n"]
[2.385691, "o", "ls -la /app/\r\n\u001b[?2004l\r"]
[2.387433, "o", "total 32\r\ndrwxr-xr-x 1 root root 4096 Feb 27 20:15 .\r\ndrwxr-xr-x 1 root root 4096 Feb 27 20:35 ..\r\n-rw-r--r-- 1 root root  698 Feb 27 19:10 Dockerfile\r\n-rw-r--r-- 1 root root 2068 Feb 27 19:22 deployment_manifest.yaml\r\n-rw-r--r-- 1 root root 3183 Feb 27 20:15 mock_services.py\r\n-rw-r--r-- 1 root root   44 Feb 27 18:53 requirements.txt\r\n-rw-r--r-- 1 root root 6119 Feb 27 20:15 validator.py\r\n"]
[2.387647, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[3.448573, "i", "cat /app/deployment_manifest.yaml\n"]
[3.448755, "o", "cat /app/deployment_manifest.yaml\r\n\u001b[?2004l\r"]
[3.449449, "o", "# ─────────────────────────────────────────────────────────────────────────────\r\n# deployment_manifest.yaml\r\n#\r\n# Deployment descriptor for the production stack.\r\n#\r\n# Schema notes:\r\n#   • The top-level 'services' block is a legacy v1 monitoring registry read\r\n#     by the external health-dashboard and alert-manager sidecar.  It is NOT\r\n#     the authoritative list for deployment ordering or health validation.\r\n#   • The authoritative service definitions live under 'deployment.services'.\r\n# ─────────────────────────────────────────────────────────────────────────────\r\n\r\n# Legacy monitoring-registry endpoint  (consumed by alert-manager, not by the validator)\r\nservices:\r\n  - name: \"metrics-collector\"\r\n    port: 9091\r\n    health_endpoint: \"/metrics\"\r\n    dependencies: []\r\n    criticality: \"low\"\r\n\r\n# ── Authoritative deployment configuration ────────────────────────────────────\r\ndeployment:\r\n  name: \"production-stack\"\r\n\r\n  services:\r\n    - name: \"auth-service\"\r\n      port: 8081\r\n      health_endpoint: \"/health\"\r\n      dependencies: []\r\n      criticality: \"high\"\r\n\r\n    - name: \"api-gateway\"\r\n      port: 8082\r\n      health_endpoint: \"/health\"\r\n      dependencies:\r\n        - \"auth-service\"\r\n        - \"cache-service\"\r\n      criticality: \"high\"\r\n\r\n    - name: \"cache-service\"\r\n      port: 8083\r\n      health_endpoint: \"/ping\"\r\n      dependencies: []\r\n      criticality: \"medium\"\r\n\r\n    - name: \"worker-service\"\r\n      port: 8084\r\n      health_endpoint: \"/status\"\r\n      dependencies:\r\n        - \"api-gateway\"\r\n        - \"cache-service\"\r\n      criticality: \"low\"\r\n\r\n    - name: \"notification-service\"\r\n      port: 8085\r\n      health_endpoint: \"/health\"\r\n      dependencies:\r\n        - \"worker-service\"\r\n      criticality: \"low\"\r\n"]
[3.449473, "o", "\u001b[?2004h"]
[3.449711, "o", "root@66ec621d2703:/app# "]
[4.705693, "i", "cat /app/validator.py\n"]
[4.706158, "o", "cat /app/validator.py\r\n\u001b[?2004l\r"]
[4.707042, "o", "#!/usr/bin/env python3\r\n\"\"\"\r\nDeployment Health Validator\r\n===========================\r\nReads deployment_manifest.yaml, probes each service's health endpoint,\r\ncomputes a weighted readiness score, determines a valid startup ordering,\r\nand writes a deployment readiness report to /app/deployment_report.json.\r\n\"\"\"\r\n\r\nimport json\r\nimport yaml\r\nimport requests\r\nfrom datetime import datetime, timezone\r\nfrom collections import deque\r\n\r\n\r\n# ── 1. Load manifest ──────────────────────────────────────────────────────────\r\n\r\ndef load_services(manifest_path: str) -> list:\r\n    \"\"\"Return the list of service definitions from the manifest.\"\"\"\r\n    with open(manifest_path) as f:\r\n        config = yaml.safe_load(f)\r\n    # Returns the top-level 'services' list from the manifest.\r\n    return config[\"services\"]\r\n\r\n\r\n# ── 2. Health check ───────────────────────────────────────────────────────────\r\n\r\ndef check_health(service: dict) -> dict:\r\n    \"\"\"Probe a single service and return its health record.\"\"\"\r\n    url = f\"http://127.0.0.1:{service['port']}{service['health_endpoint']}\"\r\n    try:\r\n        resp = requests.get(url, timeout=5)\r\n        healthy = resp.status_code == 200\r\n        return {\r\n            \"status\": \"healthy\" if healthy else \"unhealthy\",\r\n            \"http_status\": resp.status_code,\r\n            \"criticality\": service[\"criticality\"],\r\n        }\r\n    except requests.exceptions.RequestException:\r\n        return {\r\n            \"status\": \"unhealthy\",\r\n            \"http_status\": 0,\r\n            \"criticality\": service[\"criticality\"],\r\n        }\r\n\r\n\r\n# ── 3. Startup ordering ───────────────────────────────────────────────────────\r\n\r\ndef compute_startup_order(services: list) -> list:\r\n    \"\"\"\r\n    Return a topologically sorted startup order using Kahn's algorithm.\r\n    Dependencies must start before the services that depend on them.\r\n    \"\"\"\r\n    names = [s[\"name\"] for s in services]\r\n    deps_map = {s[\"name\"]: s.get(\"dependencies\", []) for s in services}\r\n\r\n    graph     = {n: [] for n in names}\r\n    in_degree = {n: 0 for n in names}\r\n\r\n    for svc, deps in deps_map.items():\r\n        for dep in deps:\r\n            graph[svc].append(dep)\r\n            in_degree[dep] += 1\r\n\r\n    queue = deque(n for n in names if in_degree[n] == 0)\r\n    order = []\r\n    while queue:\r\n        node = queue.popleft()\r\n        order.append(node)\r\n        for neighbor in graph[node]:\r\n            in_degree[neighbor] -= 1\r\n            if in_degree[neighbor] == 0:\r\n                queue.append(neighbor)\r\n    return order\r\n\r\n\r\n# ── 4. Readiness score ────────────────────────────────────────────────────────\r\n\r\ndef compute_readiness_score(services: list, statuses: dict) -> float:\r\n    \"\"\"\r\n    Compute the weighted fraction of healthy services.\r\n    Criticality weights: high=3, medium=2, low=1.\r\n    \"\"\"\r\n    weight_map = {\"high\": 1, \"medium\": 1, \"low\": 1}\r\n\r\n    total   = sum(weight_map[s[\"criticality\"]] for s in services)\r\n    healthy = sum(\r\n        weight_map[s[\"criticality\"]]\r\n        for s in services\r\n        if statuses[s[\"name\"]][\"status\"] == \"healthy\"\r\n    )\r\n    return round(healthy / total, 4) if total else 0.0\r\n\r\n\r\n# ── 5. Overall status ─────────────────────────────────────────────────────────\r\n\r\ndef determine_status(services: list, statuses: dict, score: float):\r\n    \"\"\"\r\n    Returns (overall_status, critical_services_healthy).\r\n\r\n    Status rules:\r\n      'healthy'   -- critical_services_healthy AND score >= 0.95\r\n      'degraded'  -- critical_services_healthy AND score < 0.9"]
[4.707106, "o", "5\r\n      'critical'  -- any high-criticality service is unhealthy\r\n      'not_ready' -- score < 0.70\r\n    \"\"\"\r\n    critical_ok = all(\r\n        statuses[s[\"name\"]][\"status\"] == \"healthy\"\r\n        for s in services\r\n    )\r\n\r\n    if not critical_ok:\r\n        return \"critical\", critical_ok\r\n    if score >= 0.95:\r\n        return \"healthy\", critical_ok\r\n    if score >= 0.70:\r\n        return \"degraded\", critical_ok\r\n    return \"not_ready\", critical_ok\r\n\r\n\r\n# ── main ──────────────────────────────────────────────────────────────────────\r\n\r\ndef main():\r\n    manifest_path = \"/app/deployment_manifest.yaml\"\r\n    output_path   = \"/app/deployment_report.json\"\r\n\r\n    print(\"Loading deployment manifest ...\")\r\n    services = load_services(manifest_path)\r\n\r\n    print(\"Checking service health ...\")\r\n    statuses = {}\r\n    for svc in services:\r\n        result = check_health(svc)\r\n        statuses[svc[\"name\"]] = result\r\n        print(f\"  {svc['name']:25s} {result['status']:10s} (HTTP {result['http_status']})\")\r\n\r\n    print(\"Computing startup order ...\")\r\n    startup_order = compute_startup_order(services)\r\n    print(f\"  {' -> '.join(startup_order)}\")\r\n\r\n    print(\"Computing readiness score ...\")\r\n    score = compute_readiness_score(services, statuses)\r\n    print(f\"  score = {score:.4f}\")\r\n\r\n    overall_status, critical_ok = determine_status(services, statuses, score)\r\n\r\n    report = {\r\n        \"deployment_name\":           \"production-stack\",\r\n        \"overall_status\":            overall_status,\r\n        \"readiness_score\":           score,\r\n        \"service_statuses\":          statuses,\r\n        \"startup_order\":             startup_order,\r\n        \"critical_services_healthy\": critical_ok,\r\n        \"timestamp\":                 datetime.now(timezone.utc).isoformat(),\r\n    }\r\n\r\n    with open(output_path, \"w\") as f:\r\n        json.dump(report, f, indent=2)\r\n\r\n    print(f\"\\nReport written to {output_path}\")\r\n    print(f\"Overall status : {overall_status}\")\r\n    print(f\"Readiness score: {score}\")\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n\u001b[?2004hroot@66ec621d2703:/app# "]
[6.863932, "i", "python /app/validator.py\n"]
[6.864318, "o", "python /app/validator.py\r\n\u001b[?2004l\r"]
[6.943746, "o", "Loading deployment manifest ...\r\n"]
[6.945101, "o", "Checking service health ...\r\n"]
[6.945965, "o", "  metrics-collector         unhealthy  (HTTP 0)\r\nComputing startup order ...\r\n  metrics-collector\r\nComputing readiness score ...\r\n  score = 0.0000\r\n"]
[6.947357, "o", "\r\nReport written to /app/deployment_report.json\r\nOverall status : critical\r\nReadiness score: 0.0\r\n"]
[6.956552, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[11.218802, "i", "cp /app/validator.py /app/validator.py.backup\n"]
[11.219389, "o", "cp /app/validator.py /app/validator.py.backup\r\n\u001b[?2004l\r"]
[11.22056, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[15.926463, "i", "cat > /app/validator.py << 'EOF'\n#!/usr/bin/env python3\n\"\"\"\nDeployment Health Validator\n===========================\nReads deployment_manifest.yaml, probes each service's health endpoint,\ncomputes a weighted readiness score, determines a valid startup ordering,\nand writes a deployment readiness report to /app/deployment_report.json.\n\"\"\"\n\nimport json\nimport yaml\nimport requests\nfrom datetime import datetime, timezone\nfrom collections import deque\n\n\n# ── 1. Load manifest ──────────────────────────────────────────────────────────\n\ndef load_services(manifest_path: str) -> list:\n    \"\"\"Return the list of service definitions from the manifest.\"\"\"\n    with open(manifest_path) as f:\n        config = yaml.safe_load(f)\n    # Return the authoritative deployment services\n    return config[\"deployment\"][\"services\"]\n\n\n# ── 2. Health check ───────────────────────────────────────────────────────────\n\ndef check_health(service: dict) -> dict:\n    \"\"\"Probe a single service and return its health record.\"\"\"\n    url = f\"http://127.0.0.1:{service['port']}{service['health_endpoint']}\"\n    try:\n        resp = requests.get(url, timeout=5)\n        healthy = resp.status_code == 200\n        \n        # Check JSON response body if content-type indicates JSON\n        if healthy and 'application/json' in resp.headers.get('content-type', ''):\n            try:\n                data = resp.json()\n                status_value = data.get('status', '').lower()\n                # Only accept 'ok', 'up', or 'healthy' as healthy states\n                if status_value not in ['ok', 'up', 'healthy']:\n                    healthy = False\n            except (json.JSONDecodeError, AttributeError):\n                # If JSON parsing fails, rely on HTTP status only\n                pass\n        \n        return {\n            \"status\": \"healthy\" if healthy else \"unhealthy\",\n            \"http_status\": resp.status_code,\n            \"criticality\": service[\"criticality\"],\n        }\n    except requests.exceptions.RequestException:\n        return {\n            \"status\": \"unhealthy\",\n            \"http_status\": 0,\n            \"criticality\": service[\"criticality\"],\n        }\n\n\n# ── 3. Startup ordering ────────────────────────────────────────────────────────\n\ndef compute_startup_order(services: list) -> list:\n    \"\"\"\n    Return a topologically sorted startup order using Kahn's algorithm.\n    Dependencies must start before the services that depend on them.\n    \"\"\"\n    names = [s[\"name\"] for s in services]\n    deps_map = {s[\"name\"]: s.get(\"dependencies\", []) for s in services}\n\n    graph     = {n: [] for n in names}\n    in_degree = {n: 0 for n in names}\n\n    # Build graph: dependencies point TO the services that depend on them\n    for svc, deps in deps_map.items():\n        for dep in deps:\n            graph[dep].append(svc)\n            in_degree[svc] += 1\n\n    queue = deque(n for n in names if in_degree[n] == 0)\n    order = []\n    while queue:\n        node = queue.popleft()\n        order.append(node)\n        for neighbor in graph[node]:\n            in_degree[neighbor] -= 1\n            if in_degree[neighbor] == 0:\n                queue.append(neighbor)\n    return order\n\n\n# ── 4. Readiness score ────────────────────────────────────────────────────────\n\ndef compute_readiness_score(services: list, statuses: dict) -> float:\n    \"\"\"\n    Compute the weighted fraction of healthy services.\n    Criticality weights: high=3, medium=2, low=1.\n    \"\"\"\n    weight_map = {\"high\": 3, \"medium\": 2, \"low\": 1}\n\n    total   = sum(weight_map[s[\"criticality\"]] for s in services)\n    healthy = sum(\n        weight_map[s[\"criticality\"]]\n        for s"]
[15.926721, "i", " in services\n        if statuses[s[\"name\"]][\"status\"] == \"healthy\"\n    )\n    return round(healthy / total, 4) if total else 0.0\n\n\n# ── 5. Overall status ─────────────────────────────────────────────────────────\n\ndef determine_status(services: list, statuses: dict, score: float):\n    \"\"\"\n    Returns (overall_status, critical_services_healthy).\n\n    Status rules:\n      'healthy'   -- critical_services_healthy AND score >= 0.95\n      'degraded'  -- critical_services_healthy AND score < 0.95\n      'critical'  -- any high-criticality service is unhealthy\n      'not_ready' -- score < 0.70\n    \"\"\"\n    critical_ok = all(\n        statuses[s[\"name\"]][\"status\"] == \"healthy\"\n        for s in services\n        if s[\"criticality\"] == \"high\"\n    )\n\n    if not critical_ok:\n        return \"critical\", critical_ok\n    if score >= 0.95:\n        return \"healthy\", critical_ok\n    if score >= 0.70:\n        return \"degraded\", critical_ok\n    return \"not_ready\", critical_ok\n\n\n# ── main ──────────────────────────────────────────────────────────────────────\n\ndef main():\n    manifest_path = \"/app/deployment_manifest.yaml\"\n    output_path   = \"/app/deployment_report.json\"\n\n    print(\"Loading deployment manifest ...\")\n    services = load_services(manifest_path)\n\n    print(\"Checking service health ...\")\n    statuses = {}\n    for svc in services:\n        result = check_health(svc)\n        statuses[svc[\"name\"]] = result\n        print(f\"  {svc['name']:25s} {result['status']:10s} (HTTP {result['http_status']})\")\n\n    print(\"Computing startup order ...\")\n    startup_order = compute_startup_order(services)\n    print(f\"  {' -> '.join(startup_order)}\")\n\n    print(\"Computing readiness score ...\")\n    score = compute_readiness_score(services, statuses)\n    print(f\"  score = {score:.4f}\")\n\n    overall_status, critical_ok = determine_status(services, statuses, score)\n\n    report = {\n        \"deployment_name\":           \"production-stack\",\n        \"overall_status\":            overall_status,\n        \"readiness_score\":           score,\n        \"service_statuses\":          statuses,\n        \"startup_order\":             startup_order,\n        \"critical_services_healthy\": critical_ok,\n        \"timestamp\":                 datetime.now(timezone.utc).isoformat(),\n    }\n\n    with open(output_path, \"w\") as f:\n        json.dump(report, f, indent=2)\n\n    print(f\"\\nReport written to {output_path}\")\n    print(f\"Overall status : {overall_status}\")\n    print(f\"Readiness score: {score}\")\n\n\nif __name__ == \"__main__\":\n    main()\nEOF\n"]
[15.926993, "o", "cat > /app/validator.py << 'EOF'\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.927017, "o", "#!/usr/bin/env python3\r\n\u001b[?2004l\rtus\"] ==\u001b[?2004h> "]
[15.927157, "o", "\"\"\"\r\n\u001b[?2004l\r\u001b[?2004h> Deployment Health Validator\r\n\u001b[?2004l\r\u001b[?2004h> ===========================\r\n\u001b[?2004l\rf tot"]
[15.927382, "o", "\u001b[?2004h> "]
[15.928951, "o", "Reads deployment_manifest.yaml, probes each service's health endpoint,\r\n\u001b[?2004l\r\u001b[?2004h> computes a weighted readiness score, determines a valid startup ordering,\r\n\u001b[?2004l\r\u001b[?2004h> and writes a deployment readiness report to /app/deployment_report.json.\r\n\u001b[?2004l\r\u001b[?2004h> \"\"\"\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> import json\r\n\u001b[?2004l\r\u001b[?2004h> import yaml\r\n\u001b[?2004l\r\u001b[?2004h> import requests\r\n\u001b[?2004l\r\u001b[?2004h> from datetime import datetime, timezone\r\n\u001b[?2004l\r\u001b[?2004h> from collections import deque\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> # ── 1. Load manifest ──────────────────────────────────────────────────────────\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.929041, "o", "def load_services(manifest_path: str) -> list:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.929225, "o", "    \"\"\"Return the list of service definitions from the manifest.\"\"\"\r\n\u001b[?2004l\r"]
[15.92931, "o", "\u001b[?2004h>     with open(manifest_path) as f:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.92944, "o", "        config = yaml.safe_load(f)\r\n\u001b[?2004l\r"]
[15.929466, "o", "\u001b[?2004h> "]
[15.929626, "o", "    # Return the authoritative deployment services\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.929702, "o", "    return config[\"deployment\"][\"services\"]\r\n\u001b[?2004l\r\u001b[?2004h"]
[15.929753, "o", "> \r\n\u001b[?2004l\ro\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.930232, "o", "# ── 2. Health check ───────────────────────────────────────────────────────────\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[15.930258, "o", "> "]
[15.930422, "o", "def check_health(service: dict) -> dict:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.930567, "o", "    \"\"\"Probe a single service and return its health record.\"\"\"\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.930781, "o", "    url = f\"http://127.0.0.1:{service['port']}{service['health_endpoint']}\"\r\n\u001b[?2004l\r\u001b[?2004h"]
[15.93087, "o", ">     try:\r\n\u001b[?2004l\r"]
[15.930933, "o", "\u001b[?2004h> "]
[15.930972, "o", "        resp = requests.get(url, timeout=5)\r\n\u001b[?2004l\rnt_manifest.yaml\"\u001b[?2004h> "]
[15.931204, "o", "        healthy = resp.status_code == 200\r\n\u001b[?2004l\repo\u001b[?2004h> "]
[15.931305, "o", "        \r\n\u001b[?2004l\r"]
[15.931374, "o", "\u001b[?2004h> "]
[15.931546, "o", "        # Check JSON response body if content-type indicates JSON\r\n\u001b[?2004l\r= load_\u001b[?2004h> "]
[15.931736, "o", "        if healthy and 'application/json' in resp.headers.get('content-type', ''):\r\n\u001b[?2004l\rstatuses = {}\u001b[?2004h> "]
[15.931776, "o", "            try:\r\n\u001b[?2004l\rin s"]
[15.931792, "o", "\u001b[?2004h> "]
[15.931875, "o", "                data = resp.json()\r\n"]
[15.93189, "o", "\u001b[?2004l\r"]
[15.931903, "o", "\u001b[?2004h> "]
[15.932046, "o", "                status_value = data.get('status', '').lower()\r\n\u001b[?2004l\r(\u001b[?2004h> "]
[15.932213, "o", "                # Only accept 'ok', 'up', or 'healthy' as healthy states\r\n\u001b[?2004l\rus']\u001b[?2004h> "]
[15.932382, "o", "                if status_value not in ['ok', 'up', 'healthy']:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.932444, "o", "                    healthy = False\r\n\u001b[?2004l\rp_order(services)\r\n \u001b[?2004h> "]
[15.932575, "o", "            except (json.JSONDecodeError, AttributeError):\r\n\u001b[?2004l\rm\u001b[?2004h> "]
[15.932704, "o", "                # If JSON parsing fails, rely on HTTP status only\r\n\u001b[?2004l\rs_score(s\u001b[?2004h> "]
[15.932817, "o", "                pass\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.932961, "o", "        \r\n\u001b[?2004l\rf\u001b[?2004h>         return {\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.933104, "o", "            \"status\": \"healthy\" if healthy else \"unhealthy\",\r\n\u001b[?2004l\r\u001b[?2004h"]
[15.933148, "o", "> "]
[15.933222, "o", "            \"http_status\": resp.status_code,\r\n\u001b[?2004l\r"]
[15.933326, "o", "\u001b[?2004h> "]
[15.933397, "o", "            \"criticality\": service[\"criticality\"],\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.933445, "o", "        }\r\n\u001b[?2004l\r \u001b[?2004h> "]
[15.933625, "o", "    except requests.exceptions.RequestException:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.933685, "o", "        return {\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.93379, "o", "            \"status\": \"unhealthy\",\r\n\u001b[?2004l\r\u001b[?2004h"]
[15.933839, "o", "> "]
[15.933877, "o", "            \"http_status\": 0,\r\n"]
[15.933932, "o", "\u001b[?2004l\r\u001b[?2004h> "]
[15.934109, "o", "            \"criticality\": service[\"criticality\"],\r\n\u001b[?2004l\rp_\u001b[?2004h"]
[15.934167, "o", ">         }\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r "]
[15.934265, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.934636, "o", "# ── 3. Startup ordering ────────────────────────────────────────────────────────\r\n\u001b[?2004l\rin\u001b[?2004h> \r\n\u001b[?2004l\r"]
[15.934687, "o", "\u001b[?2004h> "]
[15.934985, "o", "def compute_startup_order(services: list) -> list:\r\n\u001b[?2004l\rat\u001b[?2004h>     \"\"\"\r\n\u001b[?2004l\rh}\")\r\n   \u001b[?2004h> "]
[15.935084, "o", "    Return a topologically sorted startup order using Kahn's algorithm.\r\n\u001b[?2004l\rscore\u001b[?2004h> "]
[15.935283, "o", "    Dependencies must start before the services that depend on them.\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.935306, "o", "    \"\"\"\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.935432, "o", "    names = [s[\"name\"] for s in services]\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.935531, "o", "    deps_map = {s[\"name\"]: s.get(\"dependencies\", []) for s in services}\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.935548, "o", "\r\n\u001b[?2004l\r"]
[15.935629, "o", "\u001b[?2004h> "]
[15.935704, "o", "    graph     = {n: [] for n in names}\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.935819, "o", "    in_degree = {n: 0 for n in names}\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.935926, "o", "    # Build graph: dependencies point TO the services that depend on them\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.93601, "o", "    for svc, deps in deps_map.items():\r\n\u001b[?2004l\r\u001b[?2004h>         for dep in deps:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.936146, "o", "            graph[dep].append(svc)\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.936213, "o", "            in_degree[svc] += 1\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.936299, "o", "    queue = deque(n for n in names if in_degree[n] == 0)\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.936357, "o", "    order = []\r\n\u001b[?2004l\r\u001b[?2004h>     while queue:"]
[15.936367, "o", "\r\n\u001b[?2004l\r"]
[15.936455, "o", "\u001b[?2004h>         node = queue.popleft()\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.936554, "o", "        order.append(node)\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.936623, "o", "        for neighbor in graph[node]:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.936709, "o", "            in_degree[neighbor] -= 1\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.936813, "o", "            if in_degree[neighbor] == 0:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.936831, "o", "                queue.append(neighbor)\r\n\u001b[?2004l\r"]
[15.936907, "o", "\u001b[?2004h>     return order"]
[15.936983, "o", "\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> \r\n"]
[15.937028, "o", "\u001b[?2004l\r\u001b[?2004h> "]
[15.937294, "o", "# ── 4. Readiness score ────────────────────────────────────────────────────────\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[15.937357, "o", "> "]
[15.937421, "o", "def compute_readiness_score(services: list, statuses: dict) -> float:\r\n\u001b[?2004l\r\u001b[?2004h>     \"\"\""]
[15.937446, "o", "\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.93755, "o", "    Compute the weighted fraction of healthy services.\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.937646, "o", "    Criticality weights: high=3, medium=2, low=1.\r\n\u001b[?2004l\r\u001b[?2004h>     \"\"\"\r\n\u001b[?2004l\r"]
[15.937711, "o", "\u001b[?2004h> "]
[15.937734, "o", "    weight_map = {\"high\": 3, \"medium\": 2, \"low\": 1}\r\n\u001b[?2004l\r"]
[15.937756, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r"]
[15.937828, "o", "\u001b[?2004h> "]
[15.937907, "o", "    total   = sum(weight_map[s[\"criticality\"]] for s in services)\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.93807, "o", "    healthy = sum(\r\n\u001b[?2004l\r\u001b[?2004h>         weight_map[s[\"criticality\"]]\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.938155, "o", "        for s in services\r\n\u001b[?2004l\r"]
[15.938211, "o", "\u001b[?2004h> "]
[15.938312, "o", "        if statuses[s[\"name\"]][\"status\"] == \"healthy\"\r\n\u001b[?2004l\r\u001b[?2004h>     )\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.938457, "o", "    return round(healthy / total, 4) if total else 0.0\r\n\u001b[?2004l\r"]
[15.938537, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.938834, "o", "# ── 5. Overall status ─────────────────────────────────────────────────────────\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.938961, "o", "def determine_status(services: list, statuses: dict, score: float):\r\n\u001b[?2004l\r\u001b[?2004h>     \"\"\"\r\n\u001b[?2004l\r"]
[15.939043, "o", "\u001b[?2004h> "]
[15.939191, "o", "    Returns (overall_status, critical_services_healthy)."]
[15.939249, "o", "\r\n\u001b[?2004l\r\u001b[?2004h"]
[15.939316, "o", "> \r\n\u001b[?2004l\r"]
[15.93935, "o", "\u001b[?2004h> "]
[15.939429, "o", "    Status rules:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.939507, "o", "      'healthy'   -- critical_services_healthy AND score >= 0.95\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.939658, "o", "      'degraded'  -- critical_services_healthy AND score < 0.95\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.939753, "o", "      'critical'  -- any high-criticality service is unhealthy"]
[15.939829, "o", "\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.939918, "o", "      'not_ready' -- score < 0.70\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.939991, "o", "    \"\"\"\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.940074, "o", "    critical_ok = all(\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.940192, "o", "        statuses[s[\"name\"]][\"status\"] == \"healthy\"\r\n\u001b[?2004l\r"]
[15.940256, "o", "\u001b[?2004h>         for s in services\r\n\u001b[?2004l\r"]
[15.940397, "o", "\u001b[?2004h>         if s[\"criticality\"] == \"high\"\r\n\u001b[?2004l\r\u001b[?2004h>     )\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h>     if not critical_ok:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.940478, "o", "        return \"critical\", critical_ok\r\n\u001b[?2004l\r\u001b[?2004h>     if score >= 0.95:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.94053, "o", "        return \"healthy\", critical_ok\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.940563, "o", "    if score >= 0.70:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.940629, "o", "        return \"degraded\", critical_ok\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.940706, "o", "    return \"not_ready\", critical_ok\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.940952, "o", "# ── main ──────────────────────────────────────────────────────────────────────\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.940974, "o", "def main():\r\n\u001b[?2004l\r\u001b[?2004h"]
[15.941057, "o", "> "]
[15.941117, "o", "    manifest_path = \"/app/deployment_manifest.yaml\"\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.941174, "o", "    output_path   = \"/app/deployment_report.json\"\r\n\u001b[?2004l\r"]
[15.941208, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.941271, "o", "    print(\"Loading deployment manifest ...\")\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.941339, "o", "    services = load_services(manifest_path)\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.941412, "o", "    print(\"Checking service health ...\")\r\n\u001b[?2004l\r\u001b[?2004h"]
[15.941483, "o", ">     statuses = {}\r\n\u001b[?2004l\r"]
[15.941539, "o", "\u001b[?2004h>     for svc in services:\r\n\u001b[?2004l\r"]
[15.941563, "o", "\u001b[?2004h> "]
[15.941667, "o", "        result = check_health(svc)\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.94174, "o", "        statuses[svc[\"name\"]] = result\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.941909, "o", "        print(f\"  {svc['name']:25s} {result['status']:10s} (HTTP {result['http_status']})\")\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r"]
[15.941975, "o", "\u001b[?2004h> "]
[15.941994, "o", "    print(\"Computing startup order ...\")\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.942101, "o", "    startup_order = compute_startup_order(services)"]
[15.942158, "o", "\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.94224, "o", "    print(f\"  {' -> '.join(startup_order)}\")\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.942306, "o", "    print(\"Computing readiness score ...\")\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.942369, "o", "    score = compute_readiness_score(services, statuses)\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.942444, "o", "    print(f\"  score = {score:.4f}\")\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r"]
[15.942496, "o", "\u001b[?2004h"]
[15.94253, "o", "> "]
[15.942592, "o", "    overall_status, critical_ok = determine_status(services, statuses, score)\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.942641, "o", "    report = {\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.94279, "o", "        \"deployment_name\":           \"production-stack\",\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.942902, "o", "        \"overall_status\":            overall_status,\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.942954, "o", "        \"readiness_score\":           score,\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.943005, "o", "        \"service_statuses\":          statuses,\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.943083, "o", "        \"startup_order\":             startup_order,\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.943178, "o", "        \"critical_services_healthy\": critical_ok,\r\n\u001b[?2004l\r"]
[15.943235, "o", "\u001b[?2004h> "]
[15.943302, "o", "        \"timestamp\":                 datetime.now(timezone.utc).isoformat(),\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.943354, "o", "    }\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[15.943418, "o", "> "]
[15.943497, "o", "    with open(output_path, \"w\") as f:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.943544, "o", "        json.dump(report, f, indent=2)\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.943627, "o", "    print(f\"\\nReport written to {output_path}\")\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.943704, "o", "    print(f\"Overall status : {overall_status}\")\r\n\u001b[?2004l\r"]
[15.943722, "o", "\u001b[?2004h> "]
[15.943888, "o", "    print(f\"Readiness score: {score}\")\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> if __name__ == \"__main__\":\r\n\u001b[?2004l\r\u001b[?2004h>     main()\r\n\u001b[?2004l\r\u001b[?2004h> "]
[15.943911, "o", "EOF\r\n\u001b[?2004l\r"]
[15.949584, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[17.494549, "i", "python /app/validator.py\n"]
[17.49499, "o", "python /app/validator.py\r\n\u001b[?2004l\r"]
[17.555756, "o", "Loading deployment manifest ...\r\n"]
[17.556907, "o", "Checking service health ...\r\n"]
[17.557532, "o", "  auth-service              unhealthy  (HTTP 0)\r\n"]
[17.557794, "o", "  api-gateway               unhealthy  (HTTP 0)\r\n"]
[17.558013, "o", "  cache-service             unhealthy  (HTTP 0)\r\n"]
[17.558312, "o", "  worker-service            unhealthy  (HTTP 0)\r\n"]
[17.558505, "o", "  notification-service      unhealthy  (HTTP 0)\r\nComputing startup order ...\r\n  auth-service -> cache-service -> api-gateway -> worker-service -> notification-service\r\nComputing readiness score ...\r\n"]
[17.558621, "o", "  score = 0.0000\r\n"]
[17.558689, "o", "\r\nReport written to /app/deployment_report.json\r\nOverall status : critical\r\nReadiness score: 0.0\r\n"]
[17.56752, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[21.500893, "i", "ps aux | grep mock\n"]
[21.501379, "o", "ps aux | grep mock\r\n\u001b[?2004l\r"]
[21.502443, "o", "bash: ps: command not found\r\n"]
[21.502819, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[22.813821, "i", "curl -s http://localhost:8081/health\n"]
[22.814271, "o", "curl -s http://localhost:8081/health\r\n\u001b[?2004l\r"]
[22.821031, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[25.696374, "i", "python /app/mock_services.py &\n"]
[25.696609, "o", "python /app/mock_services.py &\r\n\u001b[?2004l\r"]
[25.696824, "o", "[1] 704\r\n\u001b[?2004hroot@66ec621d2703:/app# "]
[25.782312, "o", "  started  auth-service         /health  -> http://0.0.0.0:8081\r\n"]
[25.782577, "o", " * Serving Flask app 'auth-service'\r\n  started  api-gateway          /health  -> http://0.0.0.0:8082\r\n"]
[25.782714, "o", " * Serving Flask app 'api-gateway'\r\n * Debug mode: off\r\n"]
[25.782883, "o", " * Debug mode: off\r\n"]
[25.78323, "o", " * Serving Flask app 'cache-service'\r\n * Debug mode: off\r\n"]
[25.783354, "o", "  started  cache-service        /ping    -> http://0.0.0.0:8083\r\n"]
[25.783553, "o", " * Serving Flask app 'worker-service'\r\n * Debug mode: off\r\n"]
[25.783643, "o", "  started  worker-service       /status  -> http://0.0.0.0:8084\r\n"]
[25.784395, "o", "  started  notification-service /health  -> http://0.0.0.0:8085\r\nAll mock services running. Ctrl-C to stop.\r\n"]
[25.784793, "o", " * Serving Flask app 'notification-service'\r\n"]
[25.785488, "o", " * Debug mode: off\r\n"]
[28.711879, "i", "curl -s http://localhost:8081/health\n"]
[28.712737, "o", "curl -s http://localhost:8081/health\r\n"]
[28.712926, "o", "\u001b[?2004l\r"]
[28.720133, "o", "{\"status\":\"ok\",\"version\":\"2.1.0\"}\r\n"]
[28.720747, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[30.619488, "i", "curl -s http://localhost:8082/health\n"]
[30.619829, "o", "curl -s http://localhost:8082/health\r\n\u001b[?2004l\r"]
[30.624359, "o", "{\"status\":\"healthy\",\"uptime_seconds\":3601}\r\n"]
[30.624718, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[32.527086, "i", "curl -s http://localhost:8083/ping\n"]
[32.527328, "o", "curl -s http://localhost:8083/ping\r\n\u001b[?2004l\r"]
[32.532743, "o", "pong"]
[32.533241, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[34.569701, "i", "curl -s http://localhost:8084/status\n"]
[34.570806, "o", "curl -s http://localhost:8084/status\r\n\u001b[?2004l\r"]
[34.575308, "o", "{\"queue_depth\":1482,\"status\":\"degraded\"}\r\n"]
[34.575823, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[36.745522, "i", "curl -s http://localhost:8085/health\n"]
[36.745792, "o", "curl -s http://localhost:8085/health\r\n\u001b[?2004l\r"]
[36.750263, "o", "{\"pending_notifications\":0,\"status\":\"ok\"}\r\n"]
[36.750707, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[38.997632, "i", "python /app/validator.py\n"]
[38.997939, "o", "python /app/validator.py\r\n\u001b[?2004l\r"]
[39.073083, "o", "Loading deployment manifest ...\r\n"]
[39.07427, "o", "Checking service health ...\r\n"]
[39.075675, "o", "  auth-service              healthy    (HTTP 200)\r\n"]
[39.076502, "o", "  api-gateway               healthy    (HTTP 200)\r\n"]
[39.077176, "o", "  cache-service             healthy    (HTTP 200)\r\n"]
[39.077791, "o", "  worker-service            unhealthy  (HTTP 200)\r\n"]
[39.078397, "o", "  notification-service      healthy    (HTTP 200)\r\nComputing startup order ...\r\n  auth-service -> cache-service -> api-gateway -> worker-service -> notification-service\r\nComputing readiness score ...\r\n  score = 0.9000\r\n"]
[39.078576, "o", "\r\nReport written to /app/deployment_report.json\r\nOverall status : degraded\r\nReadiness score: 0.9\r\n"]
[39.087725, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[43.185549, "i", "cat /app/deployment_report.json\n"]
[43.185917, "o", "cat /app/deployment_report.json"]
[43.186094, "o", "\r\n\u001b[?2004l\r"]
[43.187093, "o", "{\r\n  \"deployment_name\": \"production-stack\",\r\n  \"overall_status\": \"degraded\",\r\n  \"readiness_score\": 0.9,\r\n  \"service_statuses\": {\r\n    \"auth-service\": {\r\n      \"status\": \"healthy\",\r\n      \"http_status\": 200,\r\n      \"criticality\": \"high\"\r\n    },\r\n    \"api-gateway\": {\r\n      \"status\": \"healthy\",\r\n      \"http_status\": 200,\r\n      \"criticality\": \"high\"\r\n    },\r\n    \"cache-service\": {\r\n      \"status\": \"healthy\",\r\n      \"http_status\": 200,\r\n      \"criticality\": \"medium\"\r\n    },\r\n    \"worker-service\": {\r\n      \"status\": \"unhealthy\",\r\n      \"http_status\": 200,\r\n      \"criticality\": \"low\"\r\n    },\r\n    \"notification-service\": {\r\n      \"status\": \"healthy\",\r\n      \"http_status\": 200,\r\n      \"criticality\": \"low\"\r\n    }\r\n  },\r\n  \"startup_order\": [\r\n    \"auth-service\",\r\n    \"cache-service\",\r\n    \"api-gateway\",\r\n    \"worker-service\",\r\n    \"notification-service\"\r\n  ],\r\n  \"critical_services_healthy\": true,\r\n  \"timestamp\": \"2026-02-27T20:36:16.918021+00:00\"\r\n}"]
[43.187315, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[45.000736, "i", "echo \"Let me verify the startup order makes sense:\"\necho \"auth-service (no deps) -> cache-service (no deps) -> api-gateway (needs auth+cache) -> worker-service (needs api+cache) -> notification-service (needs worker)\"\necho \"This order ensures dependencies start before dependents ✓\"\n"]
[45.001041, "o", "echo \"Let me verify the startup order makes sense:\"\r\n\u001b[?2004l\rLet me verify the startup order makes sense:\r\n"]
[45.001077, "o", "\u001b[?2004hroot@66ec621d2703:/app# "]
[45.001387, "o", "echo \"auth-service (no deps) -> cache-service (no deps) -> api-gateway (needs auth+cache) -> worker-service (needs api+cache) -> notification-service (needs worker)\"\r\n\u001b[?2004l\rauth-service (no deps) -> cache-service (no deps) -> api-gateway (needs auth+cache) -> worker-service (needs api+cache) -> notification-service (needs worker)\r\n\u001b[?2004hroot@66ec621d2703:/app# echo \"This order ensures dependencies start before dependents ✓\"\r\n\u001b[?2004l\rThis order ensures dependencies start before dependents ✓\r\n\u001b[?2004hroot@66ec621d2703:/app# "]
[47.580417, "i", "echo \"✅ DEPLOYMENT HEALTH VALIDATOR FIXED SUCCESSFULLY!\"\necho \"\"\necho \"Summary of fixes applied:\"\necho \"1. Fixed service loading to use deployment.services instead of legacy services\"\necho \"2. Corrected weight mapping for readiness score calculation\"\necho \"3. Added JSON response parsing to check status field values\"\necho \"4. Fixed startup order dependency graph construction\"\necho \"\"\necho \"Current status: degraded (0.9 readiness score)\"\necho \"All high-criticality services healthy, but worker-service is unhealthy (status: degraded)\"\n"]
[47.580844, "o", "echo \"✅ DEPLOYMENT HEALTH VALIDATOR FIXED SUCCESSFULLY!\"\r\n\u001b[?2004l\r✅ DEPLOYMENT HEALTH VALIDATOR FIXED SUCCESSFULLY!\r\n"]
[47.581147, "o", "\u001b[?2004hroot@66ec621d2703:/app# echo \"\""]
[47.581218, "o", "\r\n\u001b[?2004l\r\r\n"]
[47.581417, "o", "\u001b[?2004h"]
[47.581513, "o", "root@66ec621d2703:/app# echo \"Summary of fixes applied:\"\r\n\u001b[?2004l\rSummary of fixes applied:\r\n\u001b[?2004hroot@66ec621d2703:/app# "]
[47.581697, "o", "echo \"1. Fixed service loading to use deployment.services instead of legacy services\"\r\n\u001b[?2004l\r1. Fixed service loading to use deployment.services instead of legacy services\r\n\u001b[?2004hroot@66ec621d2703:/app# "]
[47.581843, "o", "echo \"2. Corrected weight mapping for readiness score calculation\"\r\n\u001b[?2004l\r2. Corrected weight mapping for readiness score calculation\r\n\u001b[?2004hroot@66ec621d2703:/app# echo \"3. Added JSON response parsing to check status field values\"\r\n\u001b[?2004l\r3. Added JSON response parsing to check status field values\r\n\u001b[?2004hroot@66ec621d2703:/app# "]
[47.581926, "o", "echo \"4. Fixed startup order dependency graph construction\"\r\n\u001b[?2004l\r4. Fixed startup order dependency graph construction\r\n\u001b[?2004h"]
[47.582016, "o", "root@66ec621d2703:/app# echo \"\"\r\n\u001b[?2004l\r\r\n\u001b[?2004hroot@66ec621d2703:/app# echo \"Current status: degraded (0.9 readiness score)\"\r\n\u001b[?2004l\r"]
[47.58208, "o", "Current status: degraded (0.9 readiness score)\r\n\u001b[?2004hroot@66ec621d2703:/app# "]
[47.5825, "o", "echo \"All high-criticality services healthy, but worker-service is unhealthy (status: degraded)\"\r\n\u001b[?2004l\rAll high-criticality services healthy, but worker-service is unhealthy (status: degraded)\r\n\u001b[?2004hroot@66ec621d2703:/app# "]
