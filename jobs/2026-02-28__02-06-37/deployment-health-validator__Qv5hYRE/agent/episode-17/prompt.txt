New Terminal Output:

root@cc33336dcd28:/app# cat >> /app/validator.py << 'EOF'
>
> # ── 3. Startup ordering ───────────────────────────────────────────────────────
>
> def compute_startup_order(services: list) -> list:
>     """
>     Return a topologically sorted startup order using Kahn's algorithm.
>     Dependencies must start before the services that depend on them.
>     """
>     names = [s["name"] for s in services]
>     deps_map = {s["name"]: s.get("dependencies", []) for s in services}
>
>     graph     = {n: [] for n in names}
>     in_degree = {n: 0 for n in names}
>
>     # Fix: dependencies should appear BEFORE their dependents
>     for svc, deps in deps_map.items():
>         for dep in deps:
>             graph[dep].append(svc)  # dep -> svc (dep must start before svc)
>             in_degree[svc] += 1    # svc depends on dep
>
>     queue = deque(n for n in names if in_degree[n] == 0)
>     order = []
>     while queue:
>         node = queue.popleft()
>         order.append(node)
>         for neighbor in graph[node]:
>             in_degree[neighbor] -= 1
>             if in_degree[neighbor] == 0:
>                 queue.append(neighbor)
>     return order
>
> EOF
root@cc33336dcd28:/app#
